version: '2.4'
 
services:
  postgresql:
    container_name: postgresql
    image: postgres:9.6-alpine
    env_file:
      - ./files2docker/.env
    environment:
      PGDATA: /var/lib/postgresql/data/pgdata
      POSTGRES_USER: sysdba
      POSTGRES_DB: sysdba
    volumes:
       - ./files2docker/postgresql.conf.sample:/etc/postgresql/postgresql.conf
       - ./files2docker/scripts:/scripts
       - ${EXTERNAL_SCRIPTS_PATH-./files2docker/external-scripts}:/external-scripts
       - ${LOCAL_PGDATA-./files2docker/postgresql-data}:/var/lib/postgresql/data/pgdata
       - ${BACKUP_PATH-./files2docker/backup}:/backup
    ports:
      - ${POSTGRES_PORT-5432}:5432
    restart: unless-stopped